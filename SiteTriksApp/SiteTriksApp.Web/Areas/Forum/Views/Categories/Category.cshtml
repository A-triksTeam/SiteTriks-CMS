@model SiteTriks.ForumModule.Data.Models.Category

@{
    ViewBag.Title = Model.Title + " Themes";
}

@section Styles {
    <link rel="stylesheet" href="~/css/grid.css" />
    <link rel="stylesheet" href="~/css/st-grid.css" />
}

<div class="fixed-top-2">
    <a href="/forum/categories" class="btn-nav-2"><span class="st-icon-return-to-list"></span>Back to Categories</a>
    @if (User.Identity.IsAuthenticated)
    {
        @Html.ActionLink("Create Theme", "Create", "Themes", new { id = Model.Id }, new { @class = "btn-nav-2" })
    }
</div>

<div class="backend-wrapper">
    <div class="grid"></div>
</div>

@section scripts{
    <script type="text/javascript" src="~/js/grid.js"></script>
    <script type="text/javascript">
        (function () {
            var grid = Grid();
            var data = { link: "/forum/themes/grid?categoryId=@Model.Id", serverSide: false }
            var columns = [
                {
                    name: 'id',
                    title: '',
                    type: 'checkbox',
                    size: 1
                },
                {
                    name: "title",
                    title: "Themes",
                    type: 'string',
                    filter: true,
                    sort: true,
                    size: 2,
                    extraFields: ['id'],
                    headerTemplate: '<strong>#item#</strong>',
                    contentTemplate: '<a href="/forum/themes/theme?id=#item0#">#item#</a>'
                },
                {
                    name: "creator",
                    title: "Creator",
                    type: 'string',
                    filter: true,
                    sort: true,
                    size: 3,
                    headerTemplate: '<strong>#item#</strong>' // #item# is the placeholder for the content
                },
                {
                    name: "dateCreated",
                    title: "Date Created",
                    type: 'date',
                    size: 1,
                    headerTemplate: '<strong>#item#</strong>' // #item# is the placeholder for the content
                },
                {
                    name: "dateModified",
                    title: "Date Modified",
                    type: 'date',
                    size: 1,
                    headerTemplate: '<strong>#item#</strong>' // #item# is the placeholder for the content
                },
                {
                    name: "id",
                    title: "Action",
                    type: 'string',
                    filter: false,
                    sort: false,
                    size: 2,
                    headerTemplate: '<strong>#item#</strong>',
                    contentTemplate: '<a class="btn" href="/forum/themes/edit?id=#item#">Edit</a>'
                }
            ];

            var buttons = [{
                title: 'Delete',
                postUrl: '/forum/themes/delete',
                type: 'danger'
            }];

            var config = grid.build(columns, buttons, grid.defaultPager, data);

            grid.init('.grid', config);
        })();
    </script>
}
