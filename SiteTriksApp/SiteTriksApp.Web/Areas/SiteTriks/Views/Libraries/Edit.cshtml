@model SiteTriks.Models.Libraries.EditLibraryViewModel

@{
    ViewBag.Title = "Edit Library";
}

@section Styles {
    <link href="~/css/navbar-remove.css" rel="stylesheet" />
}

    <div class="backend-wrapper">
        @using (Html.BeginForm())
        {

            <div class="fixed-top-2">
                @await Html.PartialAsync("SecondNavHeader")

                <a href="@Url.Action("Index")" class="btn-nav-2"><span class="st-icon-return-to-list"></span>Cancel</a>
                <input type="submit" value="Save & Exit" class="btn-nav-2" />
            </div>

            @Html.AntiForgeryToken()

            <div class="page-properties row">
                    <hr />
                    <div class="col col-lg-6 col-md-6 -col-xs-12">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(model => model.Id)

                        <div class="form-group row">
                            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                            @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control inline-block", id = "input-name" } })
                            @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group row">
                            @Html.LabelFor(model => model.Prefix, "Url Prefix", htmlAttributes: new { @class = "control-label col-md-2" })
                            @Html.DisplayFor(model => model.Prefix, new { htmlAttributes = new { @class = "form-control", id = "input-prefix" } })
                            @Html.ValidationMessageFor(model => model.Prefix, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group row">
                            @Html.LabelFor(model => model.StorageProviderName, "Storage Provider Name", htmlAttributes: new { @class = "control-label col-md-2" })
                            @Html.DisplayFor(model => model.StorageProviderName, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.StorageProviderName, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group row">
                            @Html.LabelFor(model => Model.Tags, htmlAttributes: new { @class = "control-label col-xs-2" })
                            @Html.EditorFor(model => Model.Tags, new { htmlAttributes = new { @class = "form-control inline-block", id = "tags" } })
                        </div>

                        @if (Model.AllowedTypes == SiteTriks.Data.Models.Helpers.FileType.Image)
                        {
                            <div class="form-group row" style="visibility:hidden;">
                                <select class="col col-lg-10 thumbnail-sizes-multiselect glyphicon" id="multiselect-thumbnails" multiple="multiple" name="SelectedThumbailSizes">
                                    @{
                                        foreach (var element in Model.ThumbnailsSizes)
                                        {
                                            var elementId = element.Id.ToString();

                                            <option value=@elementId>@Html.DisplayFor(m => element.Name) </option>

                                        }
                                    }
                                </select>

                            </div>

                            <div class="form-group row">
                                <label class="control-label col-xs-2" for="SelectedThumbailSizes">Selected ThumbailSizes</label>
                                <div class="controls span2 col col-lg-10 thumbnail-sizes-multiselect glyphicon" id="multiselect-sizes" multiple="multiple">
                                    @{
                                        foreach (var element in Model.ThumbnailsSizes)
                                        {
                                            var elementId = element.Id.ToString();
                                            <div class="thumbnails-label-container">
                                                <label class="checkbox checkbox-container">
                                                    <input type="checkbox" value=@elementId id=""> @Html.DisplayFor(m => element.Name)
                                                    <span class="checkmark"></span>
                                                </label><span class="glyphicon glyphicon-remove"></span><span class="glyphicon glyphicon-pencil"></span>
                                            </div>

    
                                        }
                                    }
                                </div>
                            </div>

                            <div class="selected-thumbnail-options" style="visibility:hidden;"> 
                                @foreach (var element in Model.SelectedThumbailSizes)
                                {
                                var elementId = element.ToString() + ' ';

                                    @elementId
                                }
                            </div>


                            @*<div class="form-group row">
                @Html.LabelFor(model => model.SelectedThumbailSizes, new { @class = "control-label col-xs-2" })
                <div class="clearme"></div>
                @Html.ListBoxFor(model => Model.SelectedThumbailSizes, Model.ThumbnailsSizes.Select((item) => new SelectListItem { Text = item.Name, Value = item.Id.ToString() }), new { @class = "form-control multiselect-thumbnails" })
                @Html.ValidationMessageFor(model => model.SelectedThumbailSizes, "", new { @class = "text-warning" })
            </div>*@
                        }
                        <div class="row">
                            <div class="col col-lg-2"></div>
                            <div class="col col-lg-10">
                                <div class="display-add-form">Add Thumbnail size</div>
                            </div>
                        </div>

                    </div>

                <div class="col col-lg-6 col-md-6 -col-xs-12">
                    @await Html.PartialAsync("CreateThumbnailSizePartial")

                </div>
            </div>

        }
    </div>

@section scripts{
    <script src="~/js/tags.js"></script>
    <script src="~/js/multiselect-setup.js"></script>
    <script src="~/js/sitetriks/libraries.js"></script>
    <script src="~/js/validator.js"></script>
    <script type="text/javascript" src="~/js/sitetriks/thumbnailSizes.js"></script>
    <script>
        createEditThumbnailSize();
        (function () {
            WarningWindow.attach();
            Tags.init();

            editLibraries('@Url.Action("IsNameAvaliable", "Libraries")', '@Model.Id');
        })();
    </script>
}
