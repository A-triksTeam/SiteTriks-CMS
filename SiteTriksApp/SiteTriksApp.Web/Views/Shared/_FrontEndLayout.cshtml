<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>

    @await Html.PartialAsync("_Favicons")

    <environment include="Development">
        <link type="text/css" rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
        <link type="text/css" rel="stylesheet" href="~/css/site.css" />
        <link type="text/css" rel="stylesheet" href="~/lib/custom/slick/slick.css" />
        <link type="text/css" rel="stylesheet" href="~/lib/custom/slick/slick-theme.css" />
        <link type="text/css" rel="stylesheet" href="~/css/toggle-menu.css" />
        <link type="text/css" rel="stylesheet" href="~/css/multi-level-dropdown.css" />
        <link type="text/css" rel="stylesheet" href="~/css/front-end.css" />
        <link type="text/css" rel="stylesheet" href="~/css/home-page.css" />
        <link type="text/css" rel="stylesheet" href="~/lib/custom/jquery-ui/jquery-ui.css" />
        <link type="text/css" rel="stylesheet" href="~/lib/custom/tinymce/plugins/codesample/css/prism.css" />
    </environment>
    <environment exclude="Development">
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css"
              asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
              asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute" />
        <link rel="stylesheet" href="~/css/frontend.min.css" asp-append-version="true" />
    </environment>

    @await Html.PartialAsync("Polyfills")

    @if (User.Identity.IsAuthenticated)
    {
        <style>
            .login {
                display: none;
            }
        </style>
    }
    else
    {
        <style>
            .logout {
                display: none;
            }
        </style>

    }

    @RenderSection("styles", required: false)

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119762809-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-119762809-1');
    </script>
    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-W66P57R');</script>
    <!-- End Google Tag Manager -->
</head>
<body class="wide">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W66P57R"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="wrapper" class="wrapper body-content">

        @RenderBody()

    </div>

    <environment include="Development">
        <script src="~/lib/jquery/dist/jquery.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>

        <script type="text/javascript" src="~/lib/custom/jquery-ui/jquery-ui-1.10.4.js"></script>
        <script src="~/lib/custom/tinymce/plugins/codesample/prism.js"></script>
        <script src="~/lib/custom/cookieNoticeJS/dist/cookie.notice.js"></script>
        <script type="text/javascript" src="~/js/data.js"></script>
        <script type="text/javascript" src="~/js/loader.js"></script>
        <script type="text/javascript" src="~/js/gallery-2.0.js"></script>
        <script type="text/javascript" src="~/js/validation.js"></script>
        <script type="text/javascript" src="~/js/validator.js"></script>
        <script type="text/javascript" src="~/js/notifier.js"></script>
        <script type="text/javascript" src="~/js/carousel.js"></script>
        <script type="text/javascript" src="~/js/input-number-checker.js"></script>
        <script type="text/javascript" src="~/js/meta-tags.js"></script>
        <script type="text/javascript" src="~/js/all-news.js"></script>
        <script type="text/javascript" src="~/js/documentation-widget.js"></script>
        <script type="text/javascript" src="~/lib/custom/slick/slick.min.js"></script>
        <script type="text/javascript" src="~/js/script-manager.js"></script>
        <script type="text/javascript" src="~/js/dynamic-widgets.js"></script>
        <script type="text/javascript" src="~/js/modules/module-builder.js"></script>
        <script type="text/javascript" src="~/js/modules/scroll-control.js"></script>
        <script type="text/javascript" src="~/js/toggle-menu.js"></script>
        @*<script type="text/javascript" src="~/js/video-custom-playlist.js"></script>*@
        <script type="text/javascript" src="~/lib/custom/slider-master/js/jssor.slider.min.js"></script>
        <script type="text/javascript" src="~/js/subscription.js"></script>
        <script type="text/javascript" src="~/js/cookie-notification-configuration.js"></script>
        <script type="text/javascript" src="~/js/licenses-widgets.js"></script>
        <script type="text/javascript" src="https://secure.skypeassets.com/i/scom/js/skype-uri.js"></script>
		<script type="text/javascript" src="~/js/sitetriks/licensesTable.js"></script>        
        <script src="~/lib/custom/code-prettify/src/run_prettify.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"
                asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                asp-fallback-test="window.jQuery"
                crossorigin="anonymous"
                integrity="sha384-K+ctZQ+LL8q6tP7I94W+qzQsfRV2a+AfHIi9k8z8l9ggpc8X+Ytst4yBo/hH+8Fk">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js"
                asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
                crossorigin="anonymous"
                integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
        </script>
        <script src="~/lib/custom/tinymce/plugins/codesample/prism.js"></script>
        <script src="~/js/frontend.min.js" asp-append-version="true"></script>
        <script type="text/javascript" src="https://secure.skypeassets.com/i/scom/js/skype-uri.js"></script>
        <script src="~/lib/custom/code-prettify/src/run_prettify.js"></script>
    </environment>

    @RenderSection("scripts", required: false)
    <script type="text/javascript">
        scriptManager.delteScriptCheck();
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            //var $scripts = $('[data-script="body-bot"]');
            //$scripts.each(function (index) {
            //    $('body').append($(this));
            //});

            //var $styles = $('[data-style="head-bot"]');
            //$styles.each(function (index) {
            //    $('head').append($(this));
            //});

            $(document).trigger("initCarousel");

            MetaTags.populateKeyWords('input[name=SEOKeyword]');

             DocumentationWidget();

            // Tree items widget logic -  to move
            $('body').unbind().on('click', '.more-items', function (event, callback, target) {

                if (callback && {}.toString.call(callback) === '[object Function]' && target) {
                    $('.hidden-section').slideToggle("slow", "swing", function () {
                        callback(target);
                    });

                    if ($(window).width() <= 767) {
                        return;

                    } else {
                        $('.hidden-section-last-body').slideToggle("slow", "swing", function () {
                            callback(target);
                        });

                    }
                } else {
                    $('.hidden-section').slideToggle("slow");
                    if ($(window).width() <= 767) {
                        return;

                    } else {
                        $('.hidden-section-last-body').slideToggle("slow");
                    }
                }
                $('.more-less-text').toggle();
                $('.more-items').toggleClass('more-clicked');
            })
        });


    </script>

    <script type="text/javascript">
        // 1.1 Adding the Video custom playlist logic directly here
        $(document).ready(function () {
            $('body').on('click', '.video-thumbnail', function () {
                var iframeCurrentSource = $('.video-container iframe').attr('src');
                var thunmbnailSource = $(this).attr('data-videoId');

                if (!(iframeCurrentSource == thunmbnailSource)) {
                    $('.video-container iframe').attr('src', thunmbnailSource);
                }
            });
        })

        $(document).ready(function () {
            $('body').on('click', '.playlist-thumbnail', function () {
                var iframeCurrentSource = $('.video-container iframe').attr('src');
                var thunmbnailSource = $(this).attr('data-videosource');

                if (!(iframeCurrentSource == thunmbnailSource)) {
                    $('.video-container iframe').attr('src', thunmbnailSource);
                }
            });
        })

    </script>

    <script>
        $(window).load(function () {
            if ($('pre').length > 0) {
                Prism.highlightAll();
            }

            if ($('.prettyprint').length > 0) {
                prettify();
            }
        });


        $(document).ready(function () {

            $('body').on('click', '.bottom-menu .menu-icon', function () {
                let pageUrl = ($(this).data("url"));
                let pageInternalNavigation = 'Page Static Interal Navigation';
                if ("ga" in window) {
                    tracker = ga.getAll()[0];
                    if (tracker)
                        tracker.send("event", pageInternalNavigation, pageUrl);
                }
            });

            $('body').on('click', '.toggle-menu .menu-icon', function () {
                let pageUrl = ($(this).data("url"));
                let pageInternalNavigation = 'Page Floating Interal Navigation';
                if ("ga" in window) {
                    tracker = ga.getAll()[0];
                    if (tracker)
                        tracker.send("event", pageInternalNavigation, pageUrl);
                }
            });

            $('body').on('click', '.top-menu .menu-icon', function () {
                let pageUrl = ($(this).data("url"));
                let pageInternalNavigation = 'Page Mobile Interal Navigation';
                if ("ga" in window) {
                    tracker = ga.getAll()[0];
                    if (tracker)
                        tracker.send("event", pageInternalNavigation, pageUrl);
                }
            });
        });
    </script>

    @*<script>
            $(document).ready(function () {

                function getYoutubeData() {
                $.ajax({
                    method: 'GET',
                    url: 'https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=PL50C17441DA8A565D&key=AIzaSyCWH87Tm8-WcMBNXi7N1QoK-AYZR3mhmR8 ',
                    dataType: 'json'
                }).done(function (data) {

                    console.log(JSON.stringify(data.items[0].snippet.thumbnails.high.url));
                    //$.map(data, function (unit, i) {
                    //    $(".video-thumbnail").append('<h1>' + unit.title + '</h1>' + '<div>' + unit.body + '</div>');
                    //})
                })
                }
                getYoutubeData();
            });

        </script>*@


    <script>
        $(document).ready(function () {
            if ($('body-content').find('.multiple-playlists')) {
                // get all thumbnails ids
                let $container = ($('.multiple-playlists .playlist-thumbnails-list .playlist-thumbnail'));
                let source;

                $container.each(function (_, element) {
                    source = $(this).data("videoid");
                    let url = getYoutubeData(source).then(function (res) {

                        let finalUrl = res.items[0].snippet.thumbnails.high.url;
                        let title = res.items[0].snippet.title;

                        $(element).children('img').attr('src', finalUrl);
                        $(element).children('.playlist-title').text(title);
                    })
                    //,Data.defaultError);

                })
            }

            /*******************Get Youtube Playlist Thumbnails ***********************/

            function getYoutubeData(playlistId) {
                //    return Data.getJson({ url: "https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=" + playlistId + "&key=AIzaSyCWH87Tm8-WcMBNXi7N1QoK-AYZR3mhmR8" })
                return new Promise((resolve, reject) => {
                    $.ajax({
                        url: "https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=" + playlistId + "&key=AIzaSyCWH87Tm8-WcMBNXi7N1QoK-AYZR3mhmR8",
                        method: 'GET',
                        contentType: 'json',
                        success: resolve,
                        error: reject
                    }).then(function (data) {
                        let result = JSON.stringify(data.items[0].snippet.thumbnails.high.url);
                        return result;
                    }) // Data.defaultError)
                });
            }

        });
    </script>

    <script>

       // let staff = getChannelDatails("UCUsTZWP1OpyBXX2_CfMv1fA");
        // console.log(staff)

        //// Get all videos from our channel
        //$(document).ready(function () {

        //    if ($('body-content').find('.multiple-playlists')) {
        //        // get all thumbnails ids
        //        let $container = ($('.multiple-playlists .playlist-thumbnails-list .playlist-thumbnail'));
        //        let videos;
        //        let channelId = "UCUsTZWP1OpyBXX2_CfMv1fA";

        //        videos = getChannelDatails(channelId).then(function (result) {


        //            console.log(JSON.stringify(result));
        //        });


        //    }

        //    // Add search functionality to the widget
        //    function getChannelDatails(channelId) {
        //        //    return Data.getJson({ url: "https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=" + playlistId + "&key=AIzaSyCWH87Tm8-WcMBNXi7N1QoK-AYZR3mhmR8" })
        //        return new Promise((resolve, reject) => {
        //            $.ajax({
        //                url: "https://www.googleapis.com/youtube/v3/search?key=AIzaSyCR5In4DZaTP6IEZQ0r1JceuvluJRzQNLE&channelId=" + channelId + "&part=snippet,id&order=date&maxResults=50",
        //                method: 'GET',
        //                contentType: 'json',
        //                success: resolve,
        //                error: reject
        //            }).then(function (data) {
        //                // let result = JSON.stringify(data.items[0].snippet.thumbnails.high.url);
        //                let result = JSON.stringify(data)

        //                return result;

        //            },  Data.defaultError)
        //        });
        //    }

        //    // Find matching video titles

        //    function findMatches(wordToMatch, videos) {
        //        return videos.filter(place => {
        //            const regex = new RegExp(wordToMatch, 'gi')
        //            return place.city.match(regex) || place.state.match(regex)
        //        });

        //    }

        //});


        // Populate them in a list for autocomplete

        // when the video is selected play the corresponding playlist starting from that video

        // 

    </script>

</body>
</html>
